import { Component, OnInit } from '@angular/core';
import { CveService } from '../services/cve-service.service';
import { Cve } from '../models/cve.model';

@Component({
  selector: 'app-cve-list',
  templateUrl: './cve-list.component.html',
  styleUrls: ['./cve-list.component.css']
})
export class CveListComponent implements OnInit {
  cves: Array<Cve> = [];
  pageNumber: number = 0;
  pageSize: number = 20;
  totalPages: number = 0;

  constructor(private cveService: CveService) {}

  ngOnInit(): void {
    this.loadPage();
  }

  loadPage(): void {
    this.cveService.getAllCves(this.pageNumber, this.pageSize).subscribe(data => {
      this.cves = data.cves;
      this.totalPages = Math.ceil(data.totalResults / this.pageSize);
    });
  }

  nextPage(): void {
    this.pageNumber++;
    this.loadPage();
  }

  previousPage(): void {
    if (this.pageNumber > 0) {
      this.pageNumber--;
      this.loadPage();
    }
  }
}
