import { Component, OnInit } from '@angular/core';
import { ActivatedRoute } from '@angular/router';
import { CveService } from '../../services/cve-service.service';
import { CweService } from '../../services/cwe-service.service';

@Component({
  selector: 'app-cve-details',
  templateUrl: './cve-details.component.html',
  styleUrls: ['./cve-details.component.css'],
})
export class CveDetailsComponent implements OnInit {
  cve: any;
  showPopup: { [key: string]: boolean } = {};

  constructor(
    private route: ActivatedRoute,
    private cveService: CveService,
    private cweService: CweService
  ) {}

  ngOnInit(): void {
    const id = this.route.snapshot.paramMap.get('id');
    if (id) {
      this.cveService.getCveById(id).subscribe((data) => {
        console.log(data);
        this.cve = data;
      });
    }
  }

  onMouseOver(cpe23: string) {
    // Ocultar todos los pop-ups
    for (const key in this.showPopup) {
      this.showPopup[key] = false;
    }
    // Mostrar solo el pop-up correspondiente al elemento debajo del ratÃ³n
    this.showPopup[cpe23] = true;
  }
  onMouseOut(cpe23: string) {
    this.showPopup[cpe23] = false;
  }

  onMouseOutWithDelay(cpe23: string) {
    setTimeout(() => this.onMouseOut(cpe23), 500);
  }
}
